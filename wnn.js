/**
 *  薇诺娜会员中心    vx小程序
 *  
 *  抓 api.qiumeiapp.com   需要值：body里的appUserToken
 *  
 *  定时一天一次           
 *  ========= 青龙--配置文件 =========
 *  变量格式: export wnntoken=""   记得删除格式中的空格 多个账号换行 或用 @ 分割
 *  如export wnntoken='XXXXXXXXXXXXXXXXXXX'
 *  
 *  7-23   完成薇诺娜会员中心基本任务
 *  12-3   增加逑美签到，跑不了的，去逑美小程序授权下，或者用旧脚本
 *  
 *  ck有效期很长   后面每天只做三个任务
 *  
 */
var _0xodc='jsjiami.com.v6',_0xodc_=['‮_0xodc'],_0x412c=[_0xodc,'aHR0cHM6Ly9hcGkucWl1bWVpYXBwLmNvbS9xbS1hY3Rpdml0eS9xZGNqL3NpZ25pbg==','cW1Vc2VyVG9rZW49','6YCR576O562+5Yiw','TkdTUk0=','ZVdoYmQ=','cHVzaA==','XTrpgJHnvo7nrb7liLDmiJDlip8=','LOiOt+W+lw==','cW1Qb2ludA==','UmFwRFM=','XTrpgJHnvo4=','XTrpgJHnvo7nrb7liLDlpLHotKUs','VHVIU28=','SXlsWnQ=','L3hjeC8xMDAwMS9nZXRYY3hVc2VySW5mbw==','VVpUQmQ=','5p+l6K+i55So5oi35ZCN','d2lub25hUG9pbnQ=','Yk1VWFo=','bmlja25hbWU=','WnFCVG8=','XTrojrflj5bku7vliqHliJfooag=','d2VFZnQ=','bVlmVkg=','eGp4Q1M=','T3lNQm0=','Cgog44CQZGVidWfjgJE9PT09PT09PT09PT09PT3ov5nmmK8g','CiDjgJBkZWJ1Z+OAkT09PT09PT09PT09PT3ov5nmmK8g','IGpzb27op6PmnpDlkI7mlbDmja49PT09PT09PT09PT0=','cGFyc2U=','ZHBtbFU=','XTrnmbvlvZXlpLHmlYg=','YllxQmU=','bUVwY0Y=','aVFWV1o=','emhEV1Q=','VUZQYm4=','Cui0puWPt1s=','Q09GRkM=','UXB3eXM=','VGFJZ04=','VENxVmY=','XTrnp6/liIY6','XTrmnKzmrKHov5DooYw6','SnVORXM=','SnNIV08=','Y0dOTVQ=','Y1ZkR2w=','RXV2Wks=','aW5kZXhPZg==','Zm9yRWFjaA==','Zm9wTlA=','SWJ6dm4=','Y3VmSWk=','IDrmnKrloavlhpnlj5jph48g','c2VuZE5vdGlmeQ==','bmFtZQ==','UVdFUlRZVUlPUEFTREZHSEpLTFpYQ1ZCTk0xMjM0NTY3ODkw','dkpOdVI=','bU5LRlk=','Y2hhckF0','Zmxvb3I=','cmFuZG9t','ZEtrQXg=','cm91bmQ=','cnNuS2c=','Z2V0SG91cnM=','cWdzSng=','S2hBaWc=','dEROdUU=','WU5FZ0Q=','VkRYaHM=','cEFWTFg=','Y2FsbGVl','ZXhlYw==','CiDjgJBkZWJ1Z+OAkT09PT09PT09PT09PT09PSDov5nmmK8g','IOivt+axgiB1cmwgPT09PT09PT09PT09PT09','Z2V0','Q3FlZ1M=','eHlKUFA=','ZUVIaWg=','UmdhSHI=','b3llbko=','TnBTVk8=','RGRNWWI=','aFB3VUE=','IOi/lOWbnmRhdGE9PT09PT09PT09PT09PQ==','PT09PT09','aXdsTHo=','IOWksei0peS6hiHor7fnqI3lkI7lsJ3or5UhIQ==','aVRyR2c=','SGt0S2o=','S2VMZ1M=','U3pzblQ=','YkhRRkc=','emR1Y1c=','cG9zdA==','aGhLdlI=','WFZTUk8=','bnRRTmM=','VXdnblI=','Y3JKT0g=','TG96ZGk=','S0VVVG8=','VENNeEc=','enJiUEg=','YmF3SHk=','d0ZBdWM=','IOivt+axgiDkv6Hmga8gPT09PT09PT09PT09PT09','IOi/lOWbnuaVsOaNrj09PT09PT09PT09PT09','Zm5Jd1E=','dUNJUE4=','aVlVZUc=','SXdRekM=','aUxEelc=','6JaH6K+65aic','aXNOb2Rl','Li9zZW5kTm90aWZ5','ZW52','d25udG9rZW4=','YXBpLnFpdW1laWFwcC5jb20=','aHR0cHM6Ly8=','5a6M5ZaE5Liq5Lq65L+h5oGv','5q+P5pel562+5Yiw','6KeC55yL55u05pKt','5aW95Y+L5Yqp5Yqb','5aW954mp5rWP6KeI','V1FHZ0M=','5Liq6LSm5Y+3PT09PT09','44CQZGVidWfjgJEg6L+Z5piv5L2g55qE6LSm5Y+35pWw57uEOiAKIA==','Rml1QmQ=','a3ZEc0w=','WEZXaXQ=','CiDkvZzogIXvvJpTa3nlpJznqbogICAgCiDku5PlupPlnLDlnYDvvJpodHRwczovL2dpdGh1Yi5jb20vU2t5TmlnaHRvdm8vanMuZ2l0','Y2tVUHM=','eE9UZ1E=','c3BsaXQ=','Cj09PT09PeW8gOWni+esrA==','SUdXVUQ=','44CQZGVidWfjgJEg6L+Z5piv5L2g56ysIA==','IOi0puWPt+S/oeaBrzog','Y2F0Y2g=','bG9nRXJy','ZmluYWxseQ==','ZG9uZQ==','Skx0d2k=','UE9TVA==','bGVuZ3Ro','bVFFTko=','S2ZSVXM=','bG9n','6LSm5Y+3Ww==','XTrku7vliqE6','S3pXdU4=','L3hjeC1hY3Rpdml0eS94Y3gtaHlydy91cGRhdGVYY3hQb2ludFRhc2s=','dXRmLTg=','YXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVk','YXBwVXNlclRva2VuPQ==','JnRhc2tDb2RlPQ==','dmhrb20=','Y29kZQ==','elFsV0k=','bXNn','V2VRRHI=','Z2V0VGltZQ==','dG9TdHJpbmc=','XTrlh7rplJnllaY=','VVVrZnY=','MTE5','aHR0cHM6Ly9zZXJ2aWNld2VjaGF0LmNvbS93eGMxNzdhNWE3MzFiOTVmZGUvNjAwL3BhZ2UtZnJhbWUuaHRtbA==','TlFhTEY=','bUZJaks=','cG9pbnRUYXNrTGlzdA==','Y29tcGxldGVTdGF0dXM=','ZGF0YQ==','dGFza0NvZGU=','XTrku7vliqHlnYflt7LlrozmiJAg','ZXJybXNn','QnJiSFE=','XTrku7vliqHliJfooajlh7rplJk=','WHVEb2E=','jelnknsjiamiRC.cOpoBgLCmRJzeS.v6=='];if(function(_0xa646ee,_0x44ae50,_0x3f203a){function _0x1c905a(_0x44e86d,_0x4e238c,_0x6b6e07,_0x1ee79c,_0x346676,_0x3dafd1){_0x4e238c=_0x4e238c>>0x8,_0x346676='po';var _0xc3a4dd='shift',_0x160897='push',_0x3dafd1='‮';if(_0x4e238c<_0x44e86d){while(--_0x44e86d){_0x1ee79c=_0xa646ee[_0xc3a4dd]();if(_0x4e238c===_0x44e86d&&_0x3dafd1==='‮'&&_0x3dafd1['length']===0x1){_0x4e238c=_0x1ee79c,_0x6b6e07=_0xa646ee[_0x346676+'p']();}else if(_0x4e238c&&_0x6b6e07['replace'](/[elnknRCOpBgLCRJzeS=]/g,'')===_0x4e238c){_0xa646ee[_0x160897](_0x1ee79c);}}_0xa646ee[_0x160897](_0xa646ee[_0xc3a4dd]());}return 0x117f6d;};return _0x1c905a(++_0x44ae50,_0x3f203a)>>_0x44ae50^_0x3f203a;}(_0x412c,0x128,0x12800),_0x412c){_0xodc_=_0x412c['length']^0x128;};function _0x2046(_0x3ec78d,_0x16167a){_0x3ec78d=~~'0x'['concat'](_0x3ec78d['slice'](0x1));var _0x150d41=_0x412c[_0x3ec78d];if(_0x2046['dTeoKw']===undefined&&'‮'['length']===0x1){(function(){var _0x4fef04=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x36ba2f='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x4fef04['atob']||(_0x4fef04['atob']=function(_0x5870e2){var _0x589e5f=String(_0x5870e2)['replace'](/=+$/,'');for(var _0x5d3c72=0x0,_0x253f1f,_0x1dc1ca,_0x6e9da6=0x0,_0x3d4dba='';_0x1dc1ca=_0x589e5f['charAt'](_0x6e9da6++);~_0x1dc1ca&&(_0x253f1f=_0x5d3c72%0x4?_0x253f1f*0x40+_0x1dc1ca:_0x1dc1ca,_0x5d3c72++%0x4)?_0x3d4dba+=String['fromCharCode'](0xff&_0x253f1f>>(-0x2*_0x5d3c72&0x6)):0x0){_0x1dc1ca=_0x36ba2f['indexOf'](_0x1dc1ca);}return _0x3d4dba;});}());_0x2046['gtTGtA']=function(_0x2eafa5){var _0x27e3ea=atob(_0x2eafa5);var _0x238dfc=[];for(var _0x5dc50a=0x0,_0x583743=_0x27e3ea['length'];_0x5dc50a<_0x583743;_0x5dc50a++){_0x238dfc+='%'+('00'+_0x27e3ea['charCodeAt'](_0x5dc50a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x238dfc);};_0x2046['RfbVLI']={};_0x2046['dTeoKw']=!![];}var _0x48a81a=_0x2046['RfbVLI'][_0x3ec78d];if(_0x48a81a===undefined){_0x150d41=_0x2046['gtTGtA'](_0x150d41);_0x2046['RfbVLI'][_0x3ec78d]=_0x150d41;}else{_0x150d41=_0x48a81a;}return _0x150d41;};const $=new Env(_0x2046('‮0'));const notify=$[_0x2046('‫1')]()?require(_0x2046('‫2')):'';const Notify=0x1;const debug=0x0;let ckStr=process[_0x2046('‫3')][_0x2046('‮4')];let msg='';let ck='';let host=_0x2046('‫5');let hostname=_0x2046('‫6')+host;let tarr=[_0x2046('‮7'),_0x2046('‮8'),_0x2046('‫9'),_0x2046('‫a'),_0x2046('‫b')];let t=[0x1346152,0x1346153,0x1346154,0x1346155,0x1346156];async function tips(_0x41b22b){var _0x4c998e={'WQGgC':function(_0xfaf581,_0x1a7376){return _0xfaf581(_0x1a7376);}};_0x4c998e[_0x2046('‫c')](DoubleLog,'\x0a======共找到'+_0x41b22b['length']+_0x2046('‫d'));_0x4c998e[_0x2046('‫c')](debugLog,_0x2046('‮e')+_0x41b22b+'\x20');}!(async()=>{var _0x163e22={'FiuBd':function(_0x295c1a,_0x4e13fa,_0x304b42){return _0x295c1a(_0x4e13fa,_0x304b42);},'kvDsL':'wnntoken','XFWit':function(_0x5010aa,_0x1282ad){return _0x5010aa(_0x1282ad);},'ckUPs':function(_0x1fc806,_0x3cecee){return _0x1fc806<_0x3cecee;},'xOTgQ':'3|1|4|2|0','IGWUD':function(_0x193bdc,_0x343482){return _0x193bdc(_0x343482);}};let _0x5378ab=await _0x163e22[_0x2046('‮f')](getCks,ckStr,_0x163e22[_0x2046('‮10')]);_0x163e22[_0x2046('‮11')](DoubleLog,_0x2046('‮12'));await tips(_0x5378ab);for(let _0x1500b2=0x0;_0x163e22[_0x2046('‫13')](_0x1500b2,_0x5378ab['length']);_0x1500b2++){var _0x1f574b=_0x163e22[_0x2046('‮14')][_0x2046('‮15')]('|'),_0x17edcf=0x0;while(!![]){switch(_0x1f574b[_0x17edcf++]){case'0':await _0x163e22[_0x2046('‮11')](start,sfsd_num);continue;case'1':DoubleLog(_0x2046('‫16')+sfsd_num+_0x2046('‫d'));continue;case'2':_0x163e22[_0x2046('‮17')](debugLog,_0x2046('‮18')+sfsd_num+_0x2046('‫19')+ck+'\x20');continue;case'3':sfsd_num=_0x1500b2+0x1;continue;case'4':ck=_0x5378ab[_0x1500b2][_0x2046('‮15')]('&');continue;}break;}}await _0x163e22['IGWUD'](SendMsg,msg);})()[_0x2046('‫1a')](_0x566871=>$[_0x2046('‫1b')](_0x566871))[_0x2046('‮1c')](()=>$[_0x2046('‫1d')]());async function start(_0x217644){var _0x403f95={'OLpLR':function(_0x50f7a7,_0x2cac7e){return _0x50f7a7(_0x2cac7e);},'JLtwi':function(_0x403999){return _0x403999();}};await _0x403f95['OLpLR'](wait,0x2);await report3(_0x217644);await wait(0x2);await _0x403f95[_0x2046('‫1e')](repor);}async function report(_0x236b32){var _0x5197ca={'KeOKg':function(_0x2814a2,_0x272f66){return _0x2814a2<_0x272f66;},'mQENJ':'CQFvB','KfRUs':function(_0x5db283,_0x438f23){return _0x5db283==_0x438f23;},'KzWuN':_0x2046('‮1f'),'vhkom':function(_0x3a54d4,_0x353fed,_0x4f02db){return _0x3a54d4(_0x353fed,_0x4f02db);},'zQlWI':function(_0x5d6caf,_0x32ecd9){return _0x5d6caf(_0x32ecd9);},'WeQDr':function(_0x26acf6,_0x1e4974){return _0x26acf6!==_0x1e4974;}};let _0x5361e3=_0x236b32;for(let _0xd81981=0x0;_0x5197ca['KeOKg'](_0xd81981,t[_0x2046('‮20')]);_0xd81981++){if(_0x5197ca['mQENJ']===_0x5197ca[_0x2046('‫21')]){if(_0x5197ca[_0x2046('‫22')](_0x5361e3,t[_0xd81981])){console[_0x2046('‫23')](_0x2046('‫24')+num+_0x2046('‫25')+tarr[_0xd81981]);}}else{if(_0x5361e3==t[_0xd81981]){console[_0x2046('‫23')](_0x2046('‫24')+num+_0x2046('‫25')+tarr[_0xd81981]);}}}let _0x20e6b4={'method':_0x5197ca[_0x2046('‫26')],'url':hostname+_0x2046('‫27'),'headers':{'Host':host,'Content-length':'71','charset':_0x2046('‮28'),'content-type':_0x2046('‮29'),'Referer':'https://servicewechat.com/wxc177a5a731b95fde/600/page-frame.html'},'body':_0x2046('‮2a')+ck[0x0]+_0x2046('‮2b')+_0x5361e3};let _0x312595=await _0x5197ca[_0x2046('‫2c')](httpRequest,_0x20e6b4,'做任务');if(_0x312595[_0x2046('‮2d')]==0xc8){_0x5197ca[_0x2046('‫2e')](DoubleLog,'账号['+num+']:'+_0x312595[_0x2046('‮2f')]);}else{if(_0x5197ca[_0x2046('‫30')]('aErPc','aErPc')){return Math['round'](new Date()[_0x2046('‮31')]())[_0x2046('‫32')]();}else{DoubleLog(_0x2046('‫24')+num+_0x2046('‮33'));}}}async function reportss(){var _0x38e0f3={'UUkfv':_0x2046('‮1f'),'NQaLF':function(_0x2ea9d8,_0xdc6aff,_0x47e8c0){return _0x2ea9d8(_0xdc6aff,_0x47e8c0);},'mFIjK':function(_0x19f7a2,_0x1fe255){return _0x19f7a2==_0x1fe255;},'xUuxK':function(_0xae1fa8,_0x5b8d47){return _0xae1fa8<_0x5b8d47;},'bNvfb':function(_0x3509fb){return _0x3509fb();},'QmQgO':function(_0x47c2a4,_0x1c7829){return _0x47c2a4(_0x1c7829);},'BrbHQ':function(_0x183f0d,_0x141972){return _0x183f0d(_0x141972);}};let _0x5580fc={'method':_0x38e0f3[_0x2046('‮34')],'url':hostname+'/xcx-activity/xcx-hyrw/getXcxPointTaskList','headers':{'Host':host,'Content-length':_0x2046('‮35'),'charset':_0x2046('‮28'),'content-type':'application/x-www-form-urlencoded','Referer':_0x2046('‫36')},'body':'appUserToken='+ck[0x0]+'&taskCodeList=20210002%2C20210003%2C20210004%2C20210005%2C20210006'};let _0x2c4140=await _0x38e0f3[_0x2046('‮37')](httpRequest,_0x5580fc,'获取任务列表');if(_0x38e0f3[_0x2046('‫38')](_0x2c4140[_0x2046('‮2d')],0xc8)){for(let _0x1d84f1=0x0;_0x38e0f3['xUuxK'](_0x1d84f1,0x5);_0x1d84f1++){if(_0x2c4140['data'][_0x2046('‫39')][_0x1d84f1][_0x2046('‮3a')]==0x0){DoubleLog(_0x2046('‫24')+num+']:做任务去');await report(taskId=_0x2c4140[_0x2046('‫3b')][_0x2046('‫39')][_0x1d84f1][_0x2046('‫3c')]);await wait(0x5);}}await wait(0x1);await _0x38e0f3['bNvfb'](signid);_0x38e0f3['QmQgO'](DoubleLog,_0x2046('‫24')+num+_0x2046('‮3d'));}else if(_0x38e0f3[_0x2046('‫38')](_0x2c4140['errcode'],0x15f91)){DoubleLog(_0x2046('‫24')+num+']:'+_0x2c4140[_0x2046('‮3e')]);}else{_0x38e0f3[_0x2046('‫3f')](DoubleLog,_0x2046('‫24')+num+_0x2046('‮40'));}}async function signid(){var _0x2f3ace={'iOkIW':_0x2046('‮1f'),'bEcNs':function(_0x211cbe,_0x2fafa1,_0x4dedab){return _0x211cbe(_0x2fafa1,_0x4dedab);},'WilhW':function(_0x1ffaa5,_0x46d915){return _0x1ffaa5===_0x46d915;},'NGSRM':'MtLtu','eWhbd':_0x2046('‫41'),'lEiMK':function(_0x33d954,_0x2b07c0){return _0x33d954(_0x2b07c0);},'RapDS':function(_0x86f3c8,_0x41897b){return _0x86f3c8==_0x41897b;},'eeiep':function(_0x37a182,_0x4cfdaf){return _0x37a182(_0x4cfdaf);}};let _0x512080={'method':_0x2f3ace['iOkIW'],'url':_0x2046('‮42'),'headers':{'Host':_0x2046('‫5'),'Content-length':'52','Content-Type':'application/x-www-form-urlencoded;\x20charset=UTF-8'},'body':_0x2046('‮43')+ck[0x0]};let _0x4b45da=await _0x2f3ace['bEcNs'](httpRequest,_0x512080,_0x2046('‮44'));if(_0x4b45da[_0x2046('‮2d')]==0xc8){if(_0x2f3ace['WilhW'](_0x2f3ace[_0x2046('‫45')],_0x2f3ace[_0x2046('‫46')])){ck[_0x2046('‮15')]('@')['forEach'](_0x39bee1=>{ckArr[_0x2046('‮47')](_0x39bee1);});}else{_0x2f3ace['lEiMK'](DoubleLog,_0x2046('‫24')+num+_0x2046('‮48'));console[_0x2046('‫23')](_0x2046('‫24')+num+']:'+_0x4b45da[_0x2046('‫3b')]['pointMessage']+_0x2046('‫49')+_0x4b45da[_0x2046('‫3b')][_0x2046('‫4a')]+'逑豆');}}else if(_0x2f3ace[_0x2046('‫4b')](_0x4b45da['code'],0x2ca)){DoubleLog(_0x2046('‫24')+num+_0x2046('‫4c')+_0x4b45da[_0x2046('‮2f')]);}else{_0x2f3ace['eeiep'](DoubleLog,_0x2046('‫24')+num+_0x2046('‮4d')+_0x4b45da[_0x2046('‮2f')]);}}async function report3(_0x1e3d38){var _0x40db4c={'IylZt':_0x2046('‮1f'),'UZTBd':function(_0x501e2a,_0x39b441,_0x2b747c){return _0x501e2a(_0x39b441,_0x2b747c);},'mYfVH':function(_0x138868,_0x34f5bf){return _0x138868==_0x34f5bf;},'bMUXZ':function(_0x36f902,_0x3afb7f){return _0x36f902(_0x3afb7f);},'ZqBTo':function(_0x310b7e,_0x4deee5){return _0x310b7e(_0x4deee5);},'weEft':function(_0x1a3ca8){return _0x1a3ca8();},'xjxCS':function(_0x508ee4,_0x39c9af){return _0x508ee4===_0x39c9af;},'OyMBm':_0x2046('‮4e'),'dpmlU':function(_0x52fc0c,_0x46ea3a){return _0x52fc0c(_0x46ea3a);}};let _0x484670={'method':_0x40db4c[_0x2046('‮4f')],'url':hostname+_0x2046('‮50'),'headers':{'Host':host,'Content-length':'53','charset':_0x2046('‮28'),'content-type':_0x2046('‮29'),'Referer':'https://servicewechat.com/wxc177a5a731b95fde/600/page-frame.html'},'body':_0x2046('‮2a')+ck[0x0]};let _0x18f357=await _0x40db4c[_0x2046('‫51')](httpRequest,_0x484670,_0x2046('‮52'));if(_0x40db4c['mYfVH'](_0x18f357[_0x2046('‮2d')],0xc8)){num=_0x1e3d38;oldpoints=_0x18f357['data'][_0x2046('‮53')];_0x40db4c[_0x2046('‮54')](DoubleLog,_0x2046('‫24')+num+']:'+_0x18f357['data'][_0x2046('‮55')]);await wait(0x3);_0x40db4c[_0x2046('‮56')](DoubleLog,_0x2046('‫24')+num+_0x2046('‫57'));await _0x40db4c[_0x2046('‮58')](reportss);}else if(_0x40db4c[_0x2046('‮59')](_0x18f357[_0x2046('‮2d')],0x258)){if(_0x40db4c[_0x2046('‫5a')](_0x40db4c[_0x2046('‫5b')],_0x40db4c[_0x2046('‫5b')])){DoubleLog('账号['+num+']:'+_0x18f357[_0x2046('‮2f')]);}else{console[_0x2046('‫23')](_0x2046('‫5c')+tip+'\x20返回数据==============');console[_0x2046('‫23')](data);console[_0x2046('‫23')](_0x2046('‮5d')+tip+_0x2046('‮5e'));console[_0x2046('‫23')](JSON[_0x2046('‫5f')](data));}}else{_0x40db4c[_0x2046('‮60')](DoubleLog,_0x2046('‫24')+num+_0x2046('‫61'));}}async function repor(_0x1b3e18){var _0x234251={'TCqVf':function(_0x5abc97,_0x47dee5){return _0x5abc97(_0x47dee5);},'JuNEs':function(_0x3f31a5,_0x1336c9){return _0x3f31a5-_0x1336c9;},'mEpcF':_0x2046('‮1f'),'iQVWZ':function(_0x3cf568,_0x4f7217,_0x3b653a){return _0x3cf568(_0x4f7217,_0x3b653a);},'zhDWT':function(_0x43c831,_0x31b033){return _0x43c831==_0x31b033;},'UFPbn':function(_0xbc684f,_0x922d4e){return _0xbc684f(_0x922d4e);},'COFFC':function(_0x164ec4,_0x5c2478){return _0x164ec4==_0x5c2478;},'Qpwys':function(_0x56c28b,_0x751d7b){return _0x56c28b===_0x751d7b;},'TaIgN':_0x2046('‮62'),'TXSjp':'ZQbkY'};let _0x1a9d00={'method':_0x234251[_0x2046('‫63')],'url':hostname+_0x2046('‮50'),'headers':{'Host':host,'Content-length':'53','charset':'utf-8','content-type':_0x2046('‮29'),'Referer':'https://servicewechat.com/wxc177a5a731b95fde/600/page-frame.html'},'body':_0x2046('‮2a')+ck[0x0]};let _0x59f39c=await _0x234251[_0x2046('‫64')](httpRequest,_0x1a9d00,_0x2046('‮52'));if(_0x234251[_0x2046('‫65')](_0x59f39c[_0x2046('‮2d')],0xc8)){_0x234251[_0x2046('‫66')](DoubleLog,_0x2046('‫24')+num+']:积分:'+_0x59f39c['data']['winonaPoint']+_0x2046('‮67')+num+']:本次运行:'+(_0x59f39c[_0x2046('‫3b')]['winonaPoint']-oldpoints)+'分');}else if(_0x234251[_0x2046('‮68')](_0x59f39c[_0x2046('‮2d')],0x258)){DoubleLog(_0x2046('‫24')+num+']:'+_0x59f39c[_0x2046('‮2f')]);}else{if(_0x234251[_0x2046('‮69')](_0x234251[_0x2046('‫6a')],_0x234251['TXSjp'])){_0x234251[_0x2046('‫6b')](DoubleLog,_0x2046('‫24')+num+_0x2046('‮6c')+_0x59f39c[_0x2046('‫3b')][_0x2046('‮53')]+_0x2046('‮67')+num+_0x2046('‮6d')+_0x234251[_0x2046('‫6e')](_0x59f39c[_0x2046('‫3b')][_0x2046('‮53')],oldpoints)+'分');}else{_0x234251['UFPbn'](DoubleLog,_0x2046('‫24')+num+_0x2046('‫61'));}}}async function getCks(_0x3297f8,_0x5e8f8c){var _0x52b8d8={'cVdGl':_0x2046('‮6f'),'EuvZK':function(_0x5713da,_0x26ace3){return _0x5713da!==_0x26ace3;},'Ibzvn':_0x2046('‮70')};return new Promise(_0x4677ef=>{var _0x5d0f49={'cufIi':_0x52b8d8[_0x2046('‫71')]};let _0x40cdf5=[];if(_0x3297f8){if(_0x52b8d8[_0x2046('‫72')](_0x3297f8[_0x2046('‮73')]('@'),-0x1)){_0x3297f8[_0x2046('‮15')]('@')[_0x2046('‮74')](_0xa1f347=>{_0x40cdf5[_0x2046('‮47')](_0xa1f347);});}else if(_0x3297f8[_0x2046('‮73')]('\x0a')!==-0x1){if(_0x52b8d8[_0x2046('‫72')](_0x2046('‫75'),_0x52b8d8[_0x2046('‮76')])){_0x3297f8[_0x2046('‮15')]('\x0a')[_0x2046('‮74')](_0x23d116=>{if(_0x2046('‮6f')===_0x5d0f49[_0x2046('‫77')]){_0x40cdf5['push'](_0x23d116);}else{console[_0x2046('‫23')](_0x2046('‫24')+num+']:任务:'+tarr[index]);}});}else{if(debug){console[_0x2046('‫23')](...args);}}}else{_0x40cdf5[_0x2046('‮47')](_0x3297f8);}_0x4677ef(_0x40cdf5);}else{console['log'](_0x2046('‫78')+_0x5e8f8c);}});}function DoubleLog(_0x434d12){if(_0x434d12){console['log'](''+_0x434d12);msg+='\x0a'+_0x434d12;}}async function SendMsg(_0x130867){var _0x36b08c={'hZbUT':function(_0x18436c,_0x356ec4){return _0x18436c>_0x356ec4;},'UBTpp':function(_0x40d1de,_0x53602){return _0x40d1de(_0x53602);},'wsCEO':_0x2046('‫2')};if(!_0x130867)return;if(_0x36b08c['hZbUT'](Notify,0x0)){if($[_0x2046('‫1')]()){var _0x2e05d8=_0x36b08c['UBTpp'](require,_0x36b08c['wsCEO']);await _0x2e05d8[_0x2046('‫79')]($[_0x2046('‮7a')],_0x130867);}else{$[_0x2046('‮2f')](_0x130867);}}else{console[_0x2046('‫23')](_0x130867);}}function randomString(_0x127889){var _0x55993b={'DaukI':function(_0x5e8de1,_0x308ed3){return _0x5e8de1||_0x308ed3;},'vJNuR':_0x2046('‫7b'),'mNKFY':function(_0x4725fd,_0x27dcd1){return _0x4725fd<_0x27dcd1;},'CqiqL':function(_0x1d5064,_0x483031){return _0x1d5064*_0x483031;}};_0x127889=_0x55993b['DaukI'](_0x127889,0x20);var _0x5f51d5=_0x55993b[_0x2046('‮7c')],_0x50ab68=_0x5f51d5[_0x2046('‮20')],_0x20b595='';for(i=0x0;_0x55993b[_0x2046('‫7d')](i,_0x127889);i++)_0x20b595+=_0x5f51d5[_0x2046('‫7e')](Math[_0x2046('‮7f')](_0x55993b['CqiqL'](Math[_0x2046('‫80')](),_0x50ab68)));return _0x20b595;}function randomInt(_0x12562b,_0x768d3e){var _0x3c7622={'ruNwH':function(_0x3c04b7,_0x2a8e2b){return _0x3c04b7+_0x2a8e2b;},'dKkAx':function(_0x5900bf,_0x4c60c8){return _0x5900bf*_0x4c60c8;},'igQgJ':function(_0x4a2e08,_0x340d45){return _0x4a2e08-_0x340d45;}};return Math['round'](_0x3c7622['ruNwH'](_0x3c7622[_0x2046('‫81')](Math[_0x2046('‫80')](),_0x3c7622['igQgJ'](_0x768d3e,_0x12562b)),_0x12562b));}function ts13(){return Math[_0x2046('‫82')](new Date()[_0x2046('‮31')]())[_0x2046('‫32')]();}function ts10(){var _0x242e8b={'rsnKg':function(_0x1d7c8d,_0x518fc3){return _0x1d7c8d/_0x518fc3;}};return Math[_0x2046('‫82')](_0x242e8b[_0x2046('‫83')](new Date()[_0x2046('‮31')](),0x3e8))['toString']();}function local_hours(){let _0x1bc7d3=new Date();h=_0x1bc7d3[_0x2046('‮84')]();return h;}function local_minutes(){let _0x56f397=new Date();m=_0x56f397['getMinutes']();return m;}function wait(_0x25aa38){var _0x2e6864={'ZEIri':function(_0x573317,_0x578026,_0x4fab42){return _0x573317(_0x578026,_0x4fab42);},'qgsJx':function(_0x1cfe07,_0x1b8162){return _0x1cfe07*_0x1b8162;}};return new Promise(function(_0x4fa65a){_0x2e6864['ZEIri'](setTimeout,_0x4fa65a,_0x2e6864[_0x2046('‮85')](_0x25aa38,0x3e8));});}async function httpGet(_0x2873e6,_0x445dd8,_0x4d9c26=0x3){var _0x5629fa={'CqegS':function(_0x3e54d1,_0x4ddeda,_0xebfd8d){return _0x3e54d1(_0x4ddeda,_0xebfd8d);},'xyJPP':function(_0xdd4b90,_0x1b2791){return _0xdd4b90*_0x1b2791;},'jzTTb':function(_0x5e8213,_0x125d7a){return _0x5e8213===_0x125d7a;},'eEHih':_0x2046('‫86'),'RgaHr':function(_0x19aa45,_0x12d6e5){return _0x19aa45!==_0x12d6e5;},'NpSVO':'oyenJ','ftQad':function(_0x5bcf8b,_0x7729db){return _0x5bcf8b==_0x7729db;},'VFNxJ':function(_0x4e31fd,_0x5f4458){return _0x4e31fd===_0x5f4458;},'iwlLz':'MALjg','iTrGg':function(_0x2ed6ee){return _0x2ed6ee();},'VDXhs':function(_0x197d81,_0x4b761e){return _0x197d81===_0x4b761e;},'pAVLX':_0x2046('‫87'),'Gplxr':_0x2046('‮88')};return new Promise(_0x2e5caa=>{let _0x5efc9b=_0x2873e6;if(!_0x445dd8){if(_0x5629fa[_0x2046('‮89')](_0x5629fa[_0x2046('‫8a')],_0x5629fa['Gplxr'])){ckArr[_0x2046('‮47')](ck);}else{let _0xa938f=arguments[_0x2046('‮8b')][_0x2046('‫32')]();let _0x1254e8=/function\s*(\w*)/i;let _0x48149d=_0x1254e8[_0x2046('‫8c')](_0xa938f);_0x445dd8=_0x48149d[0x1];}}if(debug){console[_0x2046('‫23')](_0x2046('‮8d')+_0x445dd8+_0x2046('‫8e'));console['log'](_0x5efc9b);}$[_0x2046('‫8f')](_0x5efc9b,async(_0xfe0b36,_0x30b379,_0x10a6e5)=>{var _0xed5c1={'DdMYb':function(_0xc6ad91,_0x4579ae,_0x41698e){return _0x5629fa[_0x2046('‫90')](_0xc6ad91,_0x4579ae,_0x41698e);},'hPwUA':function(_0x3eb1b4,_0x134135){return _0x5629fa[_0x2046('‫91')](_0x3eb1b4,_0x134135);}};try{if(_0x5629fa['jzTTb'](_0x5629fa[_0x2046('‮92')],_0x5629fa[_0x2046('‮92')])){if(debug){if(_0x5629fa[_0x2046('‫93')](_0x2046('‫94'),_0x5629fa[_0x2046('‮95')])){return new Promise(function(_0x1ce642){_0xed5c1[_0x2046('‮96')](setTimeout,_0x1ce642,_0xed5c1[_0x2046('‮97')](n,0x3e8));});}else{console['log'](_0x2046('‫5c')+_0x445dd8+_0x2046('‮98'));console[_0x2046('‫23')](_0x10a6e5);console[_0x2046('‫23')](_0x2046('‫99'));console[_0x2046('‫23')](JSON[_0x2046('‫5f')](_0x10a6e5));}}let _0x485968=JSON[_0x2046('‫5f')](_0x10a6e5);if(_0x5629fa['ftQad'](_0x485968,undefined)){return;}else{if(_0x5629fa['VFNxJ'](_0x5629fa[_0x2046('‮9a')],_0x5629fa['iwlLz'])){_0x2e5caa(_0x485968);}else{console[_0x2046('‫23')](_0x2046('‮8d')+_0x445dd8+_0x2046('‫8e'));console[_0x2046('‫23')](_0x5efc9b);}}}else{console[_0x2046('‫23')](message);}}catch(_0xdc32ad){console[_0x2046('‫23')](_0xfe0b36,_0x30b379);console['log']('\x0a\x20'+_0x445dd8+'\x20失败了!请稍后尝试!!');msg+='\x0a\x20'+_0x445dd8+_0x2046('‮9b');}finally{_0x5629fa[_0x2046('‫9c')](_0x2e5caa);}},_0x4d9c26);});}async function httpPost(_0x35b722,_0xe4f1dd,_0x1c802c=0x3){var _0x5aebea={'hhKvR':function(_0x1cda44,_0x1853ec){return _0x1cda44===_0x1853ec;},'XVSRO':_0x2046('‫9d'),'ntQNc':function(_0x1e1625,_0x17cdcf){return _0x1e1625!==_0x17cdcf;},'UwgnR':'mwwQf','JFWaB':_0x2046('‮9e'),'Lozdi':function(_0xed51e8,_0x7d346a){return _0xed51e8==_0x7d346a;},'KEUTo':_0x2046('‮9f'),'rCxNH':_0x2046('‫a0'),'CsSdN':function(_0x4bb098,_0x1fb173){return _0x4bb098===_0x1fb173;},'TCMxG':'ohLZq','VgUYH':_0x2046('‫a1')};return new Promise(_0x1c1671=>{let _0x15d850=_0x35b722;if(!_0xe4f1dd){let _0x1e30b7=arguments[_0x2046('‮8b')][_0x2046('‫32')]();let _0x20fc08=/function\s*(\w*)/i;let _0x3a9478=_0x20fc08[_0x2046('‫8c')](_0x1e30b7);_0xe4f1dd=_0x3a9478[0x1];}if(debug){console[_0x2046('‫23')](_0x2046('‮8d')+_0xe4f1dd+_0x2046('‫8e'));console['log'](_0x15d850);}$[_0x2046('‮a2')](_0x15d850,async(_0x3023e4,_0x5cab87,_0x318e89)=>{var _0x59cd2b={'crJOH':function(_0x5171c1,_0x693f76){return _0x5171c1(_0x693f76);}};if(_0x5aebea[_0x2046('‫a3')]('HktKj',_0x5aebea[_0x2046('‫a4')])){try{if(debug){if(_0x5aebea[_0x2046('‫a5')](_0x5aebea[_0x2046('‮a6')],_0x5aebea['JFWaB'])){console['log'](_0x2046('‫5c')+_0xe4f1dd+'\x20返回data==============');console['log'](_0x318e89);console[_0x2046('‫23')]('======');console['log'](JSON['parse'](_0x318e89));}else{_0x59cd2b[_0x2046('‫a7')](DoubleLog,_0x2046('‫24')+num+_0x2046('‮40'));}}let _0x57f508=JSON[_0x2046('‫5f')](_0x318e89);if(_0x5aebea[_0x2046('‫a8')](_0x57f508,undefined)){if(_0x5aebea['ntQNc'](_0x5aebea[_0x2046('‮a9')],_0x5aebea['rCxNH'])){return;}else{return;}}else{if(_0x5aebea['CsSdN'](_0x5aebea[_0x2046('‫aa')],_0x5aebea['VgUYH'])){if(_0x318e89){console['log'](''+_0x318e89);msg+='\x0a'+_0x318e89;}}else{_0x1c1671(_0x57f508);}}}catch(_0x4ab629){console[_0x2046('‫23')](_0x3023e4,_0x5cab87);console[_0x2046('‫23')]('\x0a\x20'+_0xe4f1dd+'\x20失败了!请稍后尝试!!');msg+='\x0a\x20'+_0xe4f1dd+_0x2046('‮9b');}finally{_0x1c1671();}}else{let _0x14baa7=arguments['callee'][_0x2046('‫32')]();let _0x473824=/function\s*(\w*)/i;let _0x6abea0=_0x473824[_0x2046('‫8c')](_0x14baa7);_0xe4f1dd=_0x6abea0[0x1];}},_0x1c802c);});}async function httpRequest(_0x73c26f,_0x2259f5,_0x21c2a0=0x3){var _0x47eda5={'wFAuc':function(_0x2825ff,_0x25283b){return _0x2825ff(_0x25283b);},'zGENE':function(_0x25e144,_0x33e8dd){return _0x25e144!==_0x33e8dd;},'fnIwQ':_0x2046('‫ab'),'mTqgU':function(_0x2333f6,_0x456027){return _0x2333f6===_0x456027;},'iYUeG':_0x2046('‮ac'),'IwQzC':function(_0x309f9f){return _0x309f9f();},'cJDOy':'request'};return new Promise(_0x59fcbc=>{var _0x193c31={'iLDzW':function(_0x1ade27,_0x5dd9ae){return _0x47eda5[_0x2046('‫ad')](_0x1ade27,_0x5dd9ae);}};let _0x31cf44=_0x73c26f;let _0x570fb0=require(_0x47eda5['cJDOy']);if(!_0x2259f5){let _0x510275=arguments[_0x2046('‮8b')][_0x2046('‫32')]();let _0x35d5c1=/function\s*(\w*)/i;let _0x470a73=_0x35d5c1[_0x2046('‫8c')](_0x510275);_0x2259f5=_0x470a73[0x1];}if(debug){console['log'](_0x2046('‮8d')+_0x2259f5+_0x2046('‫ae'));console['log'](_0x31cf44);}_0x570fb0(_0x31cf44,async(_0x456912,_0x41ce27,_0xd1a5a2)=>{var _0x3462c0={'uCIPN':function(_0xbc88ab,_0x3b41bd){return _0x47eda5[_0x2046('‫ad')](_0xbc88ab,_0x3b41bd);}};try{if(debug){console['log'](_0x2046('‫5c')+_0x2259f5+_0x2046('‮af'));console[_0x2046('‫23')](_0xd1a5a2);console[_0x2046('‫23')]('\x0a\x20【debug】=============这是\x20'+_0x2259f5+_0x2046('‮5e'));console[_0x2046('‫23')](JSON['parse'](_0xd1a5a2));}let _0x22933a=JSON[_0x2046('‫5f')](_0xd1a5a2);if(!_0x22933a)return;_0x47eda5['wFAuc'](_0x59fcbc,_0x22933a);}catch(_0x3ee7c1){if(_0x47eda5['zGENE']('zrbPH',_0x47eda5[_0x2046('‮b0')])){_0x3462c0[_0x2046('‫b1')](DoubleLog,_0x2046('‫24')+num+']:'+result[_0x2046('‮2f')]);}else{console['log'](_0x456912,_0x41ce27);console[_0x2046('‫23')]('\x0a\x20'+_0x2259f5+_0x2046('‮9b'));msg+='\x0a\x20'+_0x2259f5+_0x2046('‮9b');}}finally{if(_0x47eda5['mTqgU'](_0x47eda5['iYUeG'],_0x47eda5[_0x2046('‮b2')])){_0x47eda5[_0x2046('‫b3')](_0x59fcbc);}else{_0x193c31[_0x2046('‫b4')](_0x59fcbc,result);}}}),_0x21c2a0;});}function debugLog(..._0x4b256a){if(debug){console[_0x2046('‫23')](..._0x4b256a);}};_0xodc='jsjiami.com.v6';
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
